
[.text-left]

= Annex II: v1.0.3 to v2.0.2 conversion

This distribution package provides some artefacts, XLS-T stylesheets, that allow the conversion of XML instances (both Request and Response documents) from version 1.0.3 into version 2.0.2. 

To be able to work with these artefacts you must be aware of the following:

* You will need to have a Java Runtime Environment (JRE) installed in your computer, preferably a Java version 8.x virtual machine;
* Preferably use the exact structure of folders as they are in the path of the distribution `dist/xlst/Versions_1-2_Mapping` (do not alter the structure)
* Use a XSL-T 2.0 engine for the transformation; one option could be the open source version of Saxon-HE (see http://www.saxonica.com/license/license.xml)
* If you are a user of the oXxygen XML editor your can use the `*.xpr` project file to execute our pre-defined Transformation Scenarios (make sure you configure the input and output files correctly and that you use the right transformation engine). 
  

To proceed to the transformation follow the instructions below.

== ESPD REQUEST conversion 

. Use the style-sheet `ESPD-Request+Response_v1.0.3-tmpv1.0.3.xslt` to transform an ESPD Request v1.0.3 into a temporary XML output file;
. Use the style-sheet `ESPD-Request_tmpv1.0.3_to_2.02.xslt` to transform the temporary XML output file into you final version 2.0.2 REGULATED ESPD Request XML file.

.Conversion process between ESPD Request v1.0.3 and REGULATED ESPD Request  
image::ConversionREQUEST.png[REQUEST 1.0.3 to 2.0.2, alt="REQUEST 1.0.3 to 2.0.2", align="center"]

== ESPD RESPONSE conversion

. Use the style-sheet `ESPD-Request+Response_v1.0.3-tmpv1.0.3.xslt` to transform an ESPD Response v1.0.3 into a temporary XML output file;
. Use the style-sheet `ESPD-Response_tmpv1.0.3_to_2.02.xslt` to transform the temporary XML output file into you final version 2.0.2 REGULATED ESPD Response XML file.

.Conversion process between ESPD Response v1.0.3 and REGULATED ESPD Response  
image::ConversionRESPONSE.png[RESPONSE 1.0.3 to 2.0.2, alt="RESPONSE 1.0.3 to 2.0.2", align="center"]


== Some Remarks about the conversion

In order to ensure stable conversions between versions 1.0.3 and 2.0.2 you must be aware of the following aspects:

* The REGULATED ESPD version 2.0.2 mimicks as much as possible the criteria data structures implemented in version 1.0.3. Thus:

** CRITERION.EXCLUSION.CONTRIBUTIONS.* Data Structure (both in REGULATED and SELF-CONTAINED) has been slightly modified to match the one in version 1.0.2.

** CRITERION.EXCLUSION.NATIONAL.OTHER (both in REGULATED and SELF-CONTAINED) has been slightly modified to match the one in version 1.0.2.

** CRITERION.SELECTION.SUITABILITY.MEMBERSHIP has been slightly modified to match the one in version 1.0.2.

** CRITERION.OTHER.EO_DATA.REGISTERED_IN_OFFICIAL_LIST has been slightly modified to match the one in version 1.0.2.
  

